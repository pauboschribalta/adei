---
title: "Entrega-1"
output: html_document
date: '2023-02-20'
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
```

## R Markdown

### Transformació de les dades

Obtenim les dades:

```{r dataset, include=TRUE}

df <- read.csv2("./bank-additional.csv")
```

Especifiquem aquelles dades que hem convertit i les transformacions que hem aplicat en elles.

#### Age:

Quatre possibles noves categories: Jove[0,25], Jove-Adult[26,45], Adult[46,65], Gran[+66].

Realitzem aquesta distinció pels següents motius:

Jove: No solen tenir gaire poder adquisitiu propi

Jove-Adult: És quan s'acostumen a fer més plans de futur i a tenir més capacitat econòmica

Adult: Solen ser persones amb una vida estable i sense gaires canvis econòmics grans

Gran: Persones amb la vida feta sense canvis econòmics

```{r}
df$age <- cut(df$age, 
              breaks = c(0, 25, 45, 65, max(df$age)),
              labels = c("Jove", "Jove-Adult", "Adult", "Gran"))
```

#### Job:

Les categories "retired", "unemployed", "student" i "housemaid" passaran a ser "unemployed", ja que tenim en compte que són persones que no cotitzen.

Els "enterpeneur" passaran a ser "self-employed".

Tractarem els "unknown" com a "unemployed", ja que assumirem el pitjor dels casos abans d'intentar predir la seva situació.

```{r}
df$job <- as.character(df$job)
df$job <- ifelse(df$job %in% c("retired", "unemployed", "student", "housemaid", "unknown"), "unemployed", df$job)
df$job <- ifelse(df$job == "entrepreneur", "self-employed", df$job)
df$job <- as.factor(df$job)
```

#### Marital:

Es mantenen les categories existents, exceptuant els "unknown".

Tractarem els "unknown" com a "single".

```{r}
df$marital <- as.character(df$marital)
df$marital <- ifelse(df$marital == "unknown", "single", df$marital)
df$marital <- as.factor(df$marital)
```

#### Education:

Les categories "basic.4y", "basic.6y", "basic.9y" passaran a ser "basic", ja que no aporta informació saber quin nivell de "basic" tenen.

Imputarem els valors "unknown".

```{r}
df$education <- as.character(df$education)
df$education <- ifelse(df$education %in% c("basic.4y", "basic.6y", "basic.9y"), "basic", df$education)
df$education <- ifelse(df$education == "unknown", NA, df$education)
df$education <- as.factor(df$education)

res.immca<-imputeMCA(df$education,ncp=18) #No funciona
summary(res.immca$completeObs)

df$education<-res.immca$completeObs
```

#### Default:

Es mantenen les categories existents.

Tractarem els "unknown" com a "no".

```{r}
df$default <- as.character(df$default)
df$default <- ifelse(df$default == "unknown", "no", df$default)
df$default <- as.factor(df$default)
```

#### Housing:

Es mantenen les categories existents.

Inputarem els valors "unknown".

```{r}

```

#### Loan:

Es mantenen les categories existents.

Inputarem els valors "unknown".

```{r}

```

#### Contact:

Eliminarem la variable, no aporta cap informació saber si va ser contacte amb mòbil o amb telèfon fix.

```{r}
df <- select(df, -contact)
```

#### Month

Es mantenen les categories existents.

#### Day of week:

Es mantenen les categories existents.

#### Duration:

Tres possibles noves categories: Baixa[0,30] Mitja[30,300] Alta[+300] (Valors amb segons).

Realitzem aquesta distinció pels següents motius:

Baixa: Una trucada que no interessa al client i ni escolta l'oferta segurament.

Mitja: Interessa al client i escolta l'oferta.

Alta: Gran interès del client, no sols escolta l'oferta sino que va més enllà.

```{r}
df <- cut(df$duration,
          breaks = c(0, 30, 300, max(df$duration)),
          labels = c("Baixa", "Mitja", "Alta"))
```

#### Campaign:

Es mantenen els valors existents.

#### Pdays:

Es mantenen els valors existents.

Transformarem els valors "999" en NA.

```{r}
df <- df %>% mutate(pdays = ifelse(pdays == 999, NA , pdays))
```

#### Previous:

Dos valors possibles: No[0] Yes[+1].

```{r}

```

#### Poutcome:

Es mantenen les categories existents.

Inputarem els valors "unknown".

```{r}

```

#### Employment variation rate

Es mantenen els valors existents.

```{r}

```

#### Consumer price index

```{r}

```

#### Consumer confidence index

Es mantenen els valors existents.

```{r}

```

#### Euribor 3 month rate

Tres possibles noves categories: Baix[0,1] Mig[1,3] Alt[+3];

```{r}

```

#### Number of employees

Es mantenen els valors existents.

```{r}

```
